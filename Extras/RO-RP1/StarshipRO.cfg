//Based on VaderIII patch for Tundra Exploration, adapted to SEP by Kari

//	================================================================================
//	General Configs
//	================================================================================

@PART[SS_21_*]:BEFORE[RealismOverhaul]
{
	!RESOURCE,* {}
	!MODULE[ModuleRCSFX],* {}
	!MODULE[ModuleInventoryPart],* {}
	!MODULE[ModuleReactionWheel],* {}

	%RSSROConfig = True
	@scale = 1.0
	@rescaleFactor = 1.0
	@manufacturer = SpaceX
	@tags = SpaceX, Starship, Mars

	@breakingForce = 999
	@breakingTorque = 999
	@crashTolerance = 20

	%maxTemp = 873.15
	%skinMaxTemp = 2973.15
	%skinThermalMassModifier = 0.43613
	%skinInternalConductionMult = 0.0000105
	%skinMassPerArea = 0.815
	%absorptiveConstant = 0.15	
	%emissiveConstant = 0.85
	%thermalMassModifier = 1.0

	MODULE
	{
		name = ModuleAeroReentry
		leaveTemp = true
		skinMaxOperationalTemp = 2773.15
	}
}

@PART[SH_21*]:BEFORE[RealismOverhaul]
{
	!RESOURCE,* {}
	!MODULE[ModuleRCSFX],* {}
	!MODULE[ModuleReactionWheel],* {}

	%RSSROConfig = True
	@scale = 1.0
	@rescaleFactor = 1.0
	@manufacturer = SpaceX
	@tags = SpaceX, Starship, SuperHeavy, Booster

	@breakingForce = 999
	@breakingTorque = 999
	@crashTolerance = 20

	%maxTemp = 873.15
	%skinMaxTemp = 1073.15
	%skinMassPerArea = 6.0
	%emissiveConstant = 0.54
	%thermalMassModifier = 1.0

	MODULE
	{
		name = ModuleAeroReentry
		leaveTemp = true
		skinMaxOperationalTemp = 973.15
	}
}

@PART[SH_21*|SS_21*]:AFTER[FerramAerospaceResearch]
{
	@MODULE[GeometryPartModule]
	{
		%forceUseMeshes = True
	}
}

//	================================================================================
//	SuperHeavy 2021 Configs
//	================================================================================

@PART[SH_21_Interstage]:FOR[RealismOverhaul]
{
	@title = SuperHeavy Interstage
	@description = This interstage is responsible for attaching Starship onto SuperHeavy, with integrated avionics it has everything to return itself to the launch site for rapid reusability.
	@mass = 8
	
	@MODULE[ModuleCommand]
	{
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.6
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 533
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = Full
			maxAmount = 100%
		}
	}	
}

@PART[SH_21_HGT]:FOR[RealismOverhaul]
{
	@title = SuperHeavy Hot Gas Thruster
	@description = This hot gas thruster is really all you need to reorient your big smart booster after stage separation.
	@mass = 0.5
	@rescaleFactor = 1.6
	
	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = RCS
		thrusterPower = 50
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = running
		showToggles = False
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
		}
		atmosphereCurve
		{
			key = 0 330
			key = 1 240
		}
	}
}

@PART[SH_21_Core]:FOR[RealismOverhaul]
{
	@title = SuperHeavy Fuel Tank
	@description = This massive fuel tank have all the fuel needed for your SuperHeavy booster.
	@mass = 58
	%CoLOffset = 0.0, 0.0, 0.0
	
	MODULE
	{
		name = ModuleFuelTanks
		volume = 4080108
		type = Tank-Sep-Starship
		basemass = -1
		TANK
		{
			name = LqdMethane
			amount = Full
			maxAmount = 43.0%
		}
		TANK
		{
			name = LqdOxygen
			amount = Full
			maxAmount = 57.0%
		}
	}
}

@PART[SH_21_Cluster]:FOR[RealismOverhaul]
{
	!MODULE[ModuleAlternator],* {}
	
	@title = SuperHeavy Engine Cluster
	@mass = 72
	@description = This powerful cluster of 32 raptor engines is responsible for lifting a starship stack and returning itself for rapid reusability.
	@angularDrag = 0
    %bodyLiftMultiplier = 0.1
	
	@MODULE[ModuleEngines*]:HAS[#engineID[AllEngines]]
	{
		@minThrust = 28467 // ~40% Throttle
		@maxThrust = 71168 // 32*2224 based on https://twitter.com/elonmusk/status/1411744982759792645 
		%ullage = True
		%pressureFed = False
		%ignitions = 999
		%throttleResponseRate = 5
		
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
			DrawGauge = False
		}
		
		 !atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 350
			key = 1 325
			key = 12 0.001
		}
		
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 1.0
		}
		IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
		{
			name = LqdMethane
			amount = 0.43 // ~ Guess
		}
		IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
		{
			name = LqdOxygen
			amount = 0.57 // ~ Guess
		}
	}

	@MODULE[ModuleEngines*]:HAS[#engineID[MiddleInner]]
	{
		@minThrust = 10675 // ~40% Throttle
		@maxThrust = 26688 // 12*2224
		%ullage = True
		%pressureFed = False
		%ignitions = 999
		%throttleResponseRate = 5
		
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
			DrawGauge = False
		}
		
		 !atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 350
			key = 1 325
			key = 12 0.001
		}
		
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 1.0
		}
		IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
		{
			name = LqdMethane
			amount = 0.43 // ~ Guess
		}
		IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
		{
			name = LqdOxygen
			amount = 0.57 // ~ Guess
		}
	}
	
	@MODULE[ModuleEngines*]:HAS[#engineID[CenterThree]]
	{
		@minThrust = 2668 // ~40% Throttle
		@maxThrust = 6672 // 3*2224
		%ullage = True
		%pressureFed = False
		%ignitions = 999
		%throttleResponseRate = 5
		
		!PROPELLANT[*],* {}
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
			DrawGauge = True
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
			DrawGauge = False
		}
		
		 !atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 350
			key = 1 325
			key = 12 0.001
		}
		
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 1.0
		}
		IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
		{
			name = LqdMethane
			amount = 0.43 // ~ Guess
		}
		IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
		{
			name = LqdOxygen
			amount = 0.57 // ~ Guess
		}
	}

}

@PART[SH_21_GRDFN]:FOR[RealismOverhaul]
{
	@title = SuperHeavy Gridfin
	@description = This isn't a big waffle, but a powerfull tool to keep your big booster on course through reentry and landing
	@mass = 1
		
}

//	================================================================================
//	Starship 2021 Configs
//	================================================================================

@PART[SS_21_Crew]:FOR[RealismOverhaul]
{
	@mass = 20.0
	@title = Starship Command Pod
	@description = This huge command pod can carry crew and cargo on long, interplanetary missions.

	@MODULE[ModuleCommand]
	{
		%hasHibernation = True
		%hibernationMultiplier = 0.625
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.6
		}
	}
	
	@MODULE[ModuleScienceContainer]
	{
		@evaOnlyStorage = False
	}

	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = RCS
		thrusterPower = 50
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = running
		showToggles = False
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
		}
		atmosphereCurve
		{
			key = 0 330
			key = 1 240
		}
	}

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 533
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = Full
			maxAmount = 100%
		}
	}

	MODULE:NEEDS[KIS]
	{
		name = ModuleKISInventory
		maxVolume = 20000
		externalAccess = false
		internalAccess = true
		slotsX = 8
		slotsY = 4
		slotSize = 50
		itemIconResolution = 128
		selfIconResolution = 128
		openSndPath = KIS/Sounds/containerOpen
		closeSndPath = KIS/Sounds/containerClose
		defaultMoveSndPath = KIS/Sounds/itemMove
	}
}

@PART[SS_21_Cargo]:FOR[RealismOverhaul]
{
	@mass = 10.0
	@title = Starship Cargo Module
	@description = This Module can carry cargo or Satellites. Perfect for your LEO Heavy Cargo needs. 

	@MODULE[ModuleCommand]
	{
		%hasHibernation = True
		%hibernationMultiplier = 0.625
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.6
		}
	}

	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = RCS
		thrusterPower = 50
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = running
		showToggles = False
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
		}
		atmosphereCurve
		{
			key = 0 330
			key = 1 240
		}
	}

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 533
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = Full
			maxAmount = 100%
		}
	}
}


@PART[SS_21_Tanker]:FOR[RealismOverhaul]
{
	@mass = 10.0
	@title = Starship Tanker Module
	@description = This Module carry fuel for your refueling missions. Probably will be your most used module.

	@MODULE[ModuleCommand]
	{
		%hasHibernation = True
		%hibernationMultiplier = 0.625
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.6
		}
	}

	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = RCS
		thrusterPower = 50
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = running
		showToggles = False
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
		}
		atmosphereCurve
		{
			key = 0 330
			key = 1 240
		}
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 533000
		maxAmount = 533000
	}
	
	MODULE
	{
		name = ModuleFuelTanks
		volume = 123692
		type = Tank-Sep-Starship
		basemass = -1
		TANK
		{
			name = LqdMethane
			amount = Full
			maxAmount = 43.0%
		}
		TANK
		{
			name = LqdOxygen
			amount = Full
			maxAmount = 57.0%
		}
	}
}

@PART[SS_21_Fuel_Tank]:FOR[RealismOverhaul]
{
	@mass = 45.0
	@title = Starship Body
	@description = This massive insulated fuel tank is designed to contain Starship's propellant for long interplanetary voyages. Shielding protects its content from the forces of reentry and also provides RCS thrust.
	%radiatorHeadroom = 0.5
	%CoMOffset = 0.0, 10.0, 0.0 //center of mass offset
    %CoLOffset = 0.0, 10.0, 0.0  //Center of lift offset
	%stagingIcon = RCS_MODULE

	MODULE
	{
		name = AdjustableCoMShifter
		DescentModeCoM = 0.0, -10.0, 0.0
	}

	@MODULE[ModuleDockingNode]
	{
		@nodeType = Starship
	}

	MODULE
	{
		name = ModuleActiveRadiator
		maxEnergyTransfer = 50000
		overcoolFactor = 0.0186367
		isCoreRadiator = true
		RESOURCE
		{
			name = ElectricCharge
			rate = 0.500
		}		
	}

	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = RCS
		thrusterPower = 50
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = running
		showToggles = False
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.43
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.57
		}
		atmosphereCurve
		{
			key = 0 330
			key = 1 240
		}
	}

	MODULE
	{
		name = ModuleFuelTanks
		volume = 1440230
		type = Tank-Sep-Starship
		basemass = -1
		TANK
		{
			name = LqdMethane
			amount = Full
			maxAmount = 43.0%
		}
		TANK
		{
			name = LqdOxygen
			amount = Full
			maxAmount = 57.0%
		}
	}
}

@PART[SS_21_FF_L]:FOR[RealismOverhaul]
{
	@mass = 0.6
	@title = Starship Front Left Flap
	@description = The Front Flap is not, and does not behave like typical control surface. Its purpose is always to hold a set trim and influence airflow around Starship while aerobraking.
	
	@MODULE[ModuleTundraControlSurface]
	{
	 @controlAuthorityRange = 0,20
	 %controlAuthority = 15
	}
}

@PART[SS_21_FF_R]:FOR[RealismOverhaul]
{
	@mass = 0.6
	@title = Starship Front Right Flap
	@description = The Front Flap is not, and does not behave like typical control surface. Its purpose is always to hold a set trim and influence airflow around Starship while aerobraking.
	
	@MODULE[ModuleTundraControlSurface]
	{
	 @controlAuthorityRange = 0,20
	 %controlAuthority = 15
	}
}

@PART[SS_21_RF_L]:FOR[RealismOverhaul]
{
	@mass = 2.0
	@title = Starship Rear Left Flap
	@description = Inspired by aircaft control surfaces, this Actuating Wing allows pitch and roll control primarily during aerobraking.
	
	@MODULE[ModuleTundraControlSurface]
	{
	 @controlAuthorityRange = 0,20
	 %controlAuthority = 15
	}
}

@PART[SS_21_RF_R]:FOR[RealismOverhaul]
{
	@mass = 2.0
	@title = Starship Rear Right Flap
	@description = Inspired by aircaft control surfaces, this Actuating Wing allows pitch and roll control primarily during aerobraking.
	
	@MODULE[ModuleTundraControlSurface]
	{
	 @controlAuthorityRange = 0,20
	 %controlAuthority = 15
	}
}

//	================================================================================
//	RealAntennas
//	================================================================================

@PART[SS_21_Crew|SS_21_Cargo|SS_21_Tanker]:BEFORE[RealAntennas]
{
	!MODULE[ModuleDataTransmitter],* {}

	MODULE
	{
		name = ModuleRealAntenna
		referenceGain = 1.5
		RFBand = UHF	//Default to UHF-band
	}

	MODULE
	{
		name = ModuleRealAntenna
		antennaDiameter = 0.8
		RFBand = S	//Default to S-band
	}
}

//	================================================================================
//	Kerbalism
//	================================================================================

@PART[SS_21_Crew]:NEEDS[RealFuels]:AFTER[RealismOverhaul]
{
	@description ^= :$: Supports a crew of 8 for 1000 days.:

	@MODULE[ModuleFuelTanks]
	{
		@volume += 142419.18

		TANK
		{
			name = Food
			amount = 46800
			maxAmount = 46800
		}

		TANK
		{
			name = Water
			amount = 25572.8
			maxAmount = 25572.8
		}

		TANK
		{
			name = Oxygen
			amount = 4737588.66
			maxAmount = 4737588.66
		}

		TANK
		{
			name = Nitrogen
			amount = 500000
			maxAmount = 500000
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 4256
		}

		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 39392
		}
	}
}

@PART[SS_21_Crew]:NEEDS[FeatureHabitat]:AFTER[zzzKerbalism]
{
	@MODULE[Habitat]
	{
		%volume = 200	//guesstimate
		%surface = 50	//guesstimate
	}
}

@PART[SS_21_Crew]:NEEDS[FeatureComfort]:FOR[Kerbalism]
{
	MODULE
	{
		name = Comfort
		bonus = panorama
		desc = Starship comes with Windows that offer a Relaxing Panoramic View of the Void of Space.
	}

	MODULE
	{
		name = Comfort
		bonus = call-home
		desc = Starship comes included with a State of the Art Telecommunications System. This allows the crew to keep in touch with their loved ones.
	}

	MODULE
	{
		name = Comfort
		bonus = exercise
		desc = Starship comes with a Treadmill designed to Permit Exercise in Zero-G. The Crew will love it.
	}

	MODULE
	{
		name = Comfort
		bonus = not-alone
		desc = Starship comes with the State of the Art VR Entertainment System, designed to play Games & experience the Joy of the Void.
	}

	@tags ^= :$: comfort:
}

@PART[SS_21_Crew]:NEEDS[ProfileRealismOverhaul]:AFTER[RealismOverhaul]
{
	%capsuleScrubbers = true
	%scrubberCapacity = 2
	%capsuleOrigin = US

	MODULE
	{
		name = ProcessController
		resource = _PressureControl
		title = N2 Pressure Controller
		capacity = 2
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _AirPump
		title = Air Pump
		capacity = 3
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _WaterRecycler
		title = Water Recycler
		capacity = 1.67
		running = true
	}

	@MODULE[ProcessController],*
	{
		@capacity *= #$/CrewCapacity$
	}

	processConfigureExclude = true
	MODULE
	{
		name = Configure
		title = Life Support
		slots = 1

		SETUP
		{
			name = N2 Pressure Control
			desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.
			tech = earlyLifeSupport
			mass = 0.05 //FIXME
			cost = 25 //FIXME

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _PressureControl
			}
		}

		SETUP
		{
			name = Air Pump
			desc = Pumps external atmosphere into the cabin to maintan internal pressure. Only works in breathable atmospheres
			tech = crewSurvivability
			mass = 0.02 //FIXME
			cost = 5 //FIXME

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _AirPump
			}
		}

		SETUP
		{
			name = Water Recycler
			desc = Filter impurities out of <b>WasteWater</b>.
			tech = advancedLifeSupport
			mass = 0.57 //	Using ISS urine processing system since that's our only wastewater generator, 742kg for 4 crew
			cost = 50 //FIXME

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WaterRecycler
			}
		}
	}
}


////// WATERFALL //////
@PART[SS_21_Fuel_Tank|SS_21_Cargo|SS_21_Crew|SS_21_Tanker]:NEEDS[Waterfall,RealismOverhaul]:FOR[StarshipExpansionProject]
{
  EFFECTS
  {
    running
    {
      AUDIO_MULTI_POOL
      {
        channel = Ship
        transformName = RCS
        clip = sound_rocket_mini
        volume = 0.0 0.0
        volume = 0.1 0.0
        volume = 0.5 0.025
        volume = 1.0 0.1
        pitch = 1.0
        loop = true
      }
    }
  }
  MODULE
  {
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = rcsFX

    // List out all controllers we want available
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    CONTROLLER
    {
      name = rcs
      linkedTo = rcs
    }
 
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-rcs-jet-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = RCS
	position = 0,0.0005,0
	rotation = 0, 0, 180
	scale = 1.2, 2.5, 1.2
    }
  }
   
}

@PART[SH_21_HGT]:NEEDS[Waterfall,RealismOverhaul]:FOR[StarshipExpansionProject]
{
  EFFECTS
  {
    running
    {
      AUDIO_MULTI_POOL
      {
        channel = Ship
        transformName = RCS
        clip = sound_rocket_mini
        volume = 0.0 0.0
        volume = 0.1 0.0
        volume = 0.5 0.025
        volume = 1.0 0.1
        pitch = 1.0
        loop = true
      }
    }
  }
  MODULE
  {
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = rcsFX

    // List out all controllers we want available
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    CONTROLLER
    {
      name = rcs
      linkedTo = rcs
    }
 
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-rcs-jet-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = RCS
	position = 0,0,0
	rotation = 0, 0, 180
	scale = 1.2, 2.5, 1.2
    }
  }
   
}

@PART[SH_21_Cluster]:NEEDS[Waterfall,RealismOverhaul]:FOR[StarshipExpansionProject]
{
  !EFFECTS {}
  EFFECTS
  {
    running_full
    {
			AUDIO
			{
				channel = Ship
				clip = Waterfall/Sounds/ZorgSounds/loop_raptor_sealevel
				volume = 0.0 0.0
				volume = 0.1 0.3
				volume = 1.0 1.0
				pitch = 0.0 0.7
				pitch = 1.0 1.0
				loop = true
			}
    }
	running_twelve
	{
		AUDIO
		{
			channel = Ship
			clip = Waterfall/Sounds/ZorgSounds/loop_raptor_sealevel
			volume = 0.0 0.0
			volume = 0.1 0.3
			volume = 1.0 1.0
			pitch = 0.0 0.7
			pitch = 1.0 1.0
			loop = true
		}
	}
	running_three
	{
		AUDIO
		{
			channel = Ship
			clip = Waterfall/Sounds/ZorgSounds/loop_raptor_sealevel
			volume = 0.0 0.0
			volume = 0.1 0.3
			volume = 1.0 1.0
			pitch = 0.0 0.7
			pitch = 1.0 1.0
			loop = true
		}
	}
    engage
    {
      AUDIO
      {
        channel = Ship
        clip = Waterfall/Sounds/ZorgSounds/engage_raptor
        volume = 1.0
        pitch = 1.0
        loop = false
      }
    }
    flameout
    {
      PREFAB_PARTICLE
      {
        prefabName = fx_exhaustSparks_flameout_2
        transformName = fullthrusttransform
        oneShot = true
      }
      AUDIO
      {
        channel = Ship
        clip = sound_explosion_low
        volume = 1.0
        pitch = 2.0
        loop = false
      }
    }
  }
  MODULE
  {
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = raptorclusterFull
    // This links the effects to a given ModuleEngines
    engineID = AllEngines

    // List out all controllers we want available
    // This controller scales with atmosphere depth
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    // This controller scales with effective throttle
    CONTROLLER
    {
      name = throttle
      linkedTo = throttle
	  engineID = AllEngines
    }
    // this controller generates a random value in the range specified
    CONTROLLER
    {
      name = random
      linkedTo = random
      range = -1,1
    }
    // -----------------------------------------------------
    // Past here should be generated with the ingame editor!
    // -----------------------------------------------------
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-methalox-lower-raptor-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = fullthrusttransform
      position = 0,0,0
	rotation = 0, 0, 0
	scale = 1,1,2
    }
  }
  
    MODULE
  {
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = raptorclusterMiddle
    // This links the effects to a given ModuleEngines
    engineID = MiddleInner

    // List out all controllers we want available
    // This controller scales with atmosphere depth
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    // This controller scales with effective throttle
    CONTROLLER
    {
      name = throttle
      linkedTo = throttle
	  engineID = MiddleInner
    }
    // this controller generates a random value in the range specified
    CONTROLLER
    {
      name = random
      linkedTo = random
      range = -1,1
    }
    // -----------------------------------------------------
    // Past here should be generated with the ingame editor!
    // -----------------------------------------------------
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-methalox-lower-raptor-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = middlethrusttransform
		position = 0, 0, 0
		rotation = 0, 0, 0
		scale = 1,1,2
    }

  }
	MODULE
	{
    name = ModuleWaterfallFX
    // This is a custom name
    moduleID = raptorclusterInner
    // This links the effects to a given ModuleEngines
    engineID = CenterThree

    // List out all controllers we want available
    // This controller scales with atmosphere depth
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    // This controller scales with effective throttle
    CONTROLLER
    {
      name = throttle
      linkedTo = throttle
	  engineID = CenterThree
    }
    // this controller generates a random value in the range specified
    CONTROLLER
    {
      name = random
      linkedTo = random
      range = -1,1
    }
    // -----------------------------------------------------
    // Past here should be generated with the ingame editor!
    // -----------------------------------------------------
    TEMPLATE
    {
      // This is the name of the template to use
      templateName = waterfall-methalox-lower-raptor-1
      // This field allows you to override the parentTransform name in the EFFECTS contained in the template
      overrideParentTransform = innerthrusttransform
		position = 0, 0, 0
		rotation = 0, 0, 0
		scale = 1,1,2
    }

  }
}